# Deployment & Operations Plan

### Hosting Strategy
- Phase 1: Netlify static hosting for `apps/tell`
- DNS: Namecheap → Netlify CNAME for `tell.meastory.com` and `meastory.com`
- Branch deploy previews for PRs and feature branches

### Build & Deploy
- Directory: `apps/tell`
- Build command: none (static) or simple bundler later
- Publish directory: `apps/tell` (or `apps/tell/dist` if a build step is added)
- Redirects/headers: configure via `apps/tell/netlify.toml`

### Environments
- Production: `main` → tell.meastory.com
- Preview: feature branches → autogenerated Netlify preview URLs
- Staging (optional): dedicated branch `staging` → staging subdomain

### Configuration Artifacts
- `apps/tell/netlify.toml` for redirects, headers, security policies
- `apps/tell/_redirects` as an alternative for simple rules

### Observability
- Basic: Netlify deploy logs; browser console sampling
- Phase 2+: Privacy-friendly analytics (Plausible/Fathom) for adult traffic
- Error reporting: optional lightweight client capture (no PII)

### Operations
- Rollback: Use Netlify’s instant rollback to prior deploy
- SLAs: Best-effort during MVP; define response windows for reports (≤48 hours)
- Backups: Not applicable for static hosting; version control is source of truth

### Security
- Enforce HTTPS; HSTS via headers
- CSP, X-Frame-Options, X-Content-Type-Options in `netlify.toml`
- Regular dependency updates once toolchain introduced

### Future: Backend Services
- Supabase (Phase 4): Auth (adult-only), Postgres, Storage; edge functions if needed
- Stripe: Billing and webhooks (host webhook handler on a small Node service or Supabase edge function)
- AI Proxy/Cache (Phase 3): Minimal Node/Express with caching (Railway/Render/Fly.io)

### Secrets Management
- Netlify environment variables for API keys and tokens
- Never commit secrets to repo; local `.env` (gitignored) when needed

### Runbooks
- Incident response: Triage user reports; check Netlify status; rollback if needed
- Analytics review: Weekly KPI checks aligned to roadmap phases
- Content updates: Story JSON changes via PR with content review checklist 