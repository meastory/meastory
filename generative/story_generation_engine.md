# Interactive Story Generation Engine
## Complete Process Documentation

### Overview
This documentation provides a systematic approach to transform public domain children's stories into interactive, personalized narratives in specific author styles for video call storytelling.

### Required Inputs
- **Source Story Text**: Original public domain story
- **Framework Template**: Interactive story structure guide
- **Author Style Guide**: Completed style analysis for target author
- **Target Age Range**: Specific age parameters (e.g., 3-8 years)

### Target Outputs
- **JSON Story File**: Complete interactive story in structured format
- **Illustration Guide**: Detailed prompts for background and character art generation
- **Quality Assurance Report**: Pathway validation and consistency check

---

## STEP 1: Source Analysis & Story Scoping

### Prompt 1A: Initial Story Analysis
```
I need you to analyze the attached source story and create a comprehensive story scope for adaptation into our interactive format.

**Source Story**: [STORY_TITLE]
**Target Author Style**: [AUTHOR_NAME] 
**Target Age Range**: [AGE_RANGE]

Please provide:

1. **Core Narrative Elements**
   - Main plot progression (beginning → middle → end)
   - Central conflict or challenge
   - Key story beats and turning points
   - Original story themes and lessons

2. **Adaptation Assessment**
   - Which elements translate well to interactive format
   - Natural decision points in the original narrative
   - Opportunities for child agency and involvement
   - Potential challenges in adaptation

3. **Narrative Goals for Interactive Version**
   - Primary learning objectives
   - Character development opportunities
   - Emotional journey for child protagonist
   - How interactivity enhances the story experience

4. **Scope Recommendation**
   - Suggested story length (number of scenes)
   - Complexity level appropriate for age range
   - Key story elements to preserve vs. modify
   - Interactive enhancement opportunities

**Format**: Provide detailed analysis with specific examples from the source text.
```

---

## STEP 2: Character Development

### Prompt 2A: Character Guide Creation
```
Based on the source story analysis, create a comprehensive character guide that formalizes each character for our interactive adaptation.

**Instructions**:
Using the source story and considering our target author style ([AUTHOR_NAME]), develop:

1. **Character Roster**
   For each character in the source story:
   - **Name & Role**: Character name and function in story
   - **Personality Traits**: 3-5 key characteristics
   - **Voice Pattern**: How they speak (formal/casual/playful/wise)
   - **Motivation**: What drives this character
   - **Relationship to Protagonist**: How they interact with the child
   - **Visual Description**: Key physical characteristics for illustration

2. **Character Voice Examples**
   For each major character, provide:
   - 2-3 sample dialogue lines in [AUTHOR_NAME]'s style
   - Typical speech patterns or phrases they might use
   - Emotional range and expression style

3. **Character Arc Potential**
   - How each character could develop through interactive choices
   - Relationship dynamics that could change based on child's decisions
   - Teaching moments each character could provide

4. **Adaptation Notes**
   - Which characters work well for interactive format
   - Any characters that need modification or combination
   - New characters that might need to be added

**Format**: Organize as detailed character profiles with specific examples.
```

---

## STEP 3: Protagonist Selection

### Prompt 3A: Child Protagonist Integration
```
Determine how to integrate the child as protagonist in our interactive story adaptation.

**Analysis Required**:

1. **Protagonist Options**
   - **Replace Existing**: Which original character should {{childName}} replace?
   - **New Addition**: Should {{childName}} be a new character joining the story?
   - **Perspective Shift**: Should {{childName}} experience the story from a different viewpoint?

2. **Integration Strategy**
   - How does {{childName}} naturally fit into the story world?
   - What motivates {{childName}} to participate in the adventure?
   - How do other characters relate to and interact with {{childName}}?
   - What special qualities or abilities does {{childName}} bring?

3. **Agency & Development**
   - What meaningful choices can {{childName}} make?
   - How does {{childName}} grow or learn through the story?
   - What challenges are appropriate for a child to face and overcome?
   - How does {{childName}}'s involvement enhance the original story themes?

4. **Age Appropriateness**
   - Is the protagonist role suitable for [AGE_RANGE]?
   - What support or guidance does {{childName}} receive?
   - How are consequences presented in age-appropriate ways?

**Decision**: Provide clear recommendation with rationale and examples of how {{childName}} integration would work.
```

---

## STEP 4: Decision Point Planning

### Prompt 4A: Decision Point Architecture
```
Design the three decision points (DP1, DP2, DP3) for our interactive story following our framework template.

**Requirements**:
Using our established framework and the story analysis, create:

1. **Decision Point 1 (Fundamental Approach)**
   - **Choice A**: [Primary approach option]
   - **Choice B**: [Alternative approach option]
   - **Underlying Dichotomy**: What core values/approaches do these choices represent?
   - **Story Integration**: Where in the original narrative does this choice naturally occur?
   - **Age Appropriateness**: How are both options presented as valid for [AGE_RANGE]?

2. **Decision Point 2 (Contextual Choices)**
   - **DP2-A Version** (following Choice A): What secondary choice builds on the first decision?
   - **DP2-B Version** (following Choice B): What secondary choice builds on the alternative path?
   - **Choice Logic**: How do these choices create meaningful story branches?
   - **Character Development**: How do these choices reveal {{childName}}'s growing agency?

3. **Decision Point 3 (Resolution Approach)**
   - **Version 1**: For 1A→2A pathway (consistent primary approach)
   - **Version 2**: For 1B→2B pathway (consistent secondary approach)  
   - **Version 3**: For 1A→2B + 1B→2A pathways (balanced/integrated approach)
   - **Convergence Strategy**: How do different pathways logically lead to these resolution points?

4. **Educational Integration**
   - What lessons does each decision point teach?
   - How do consequences reinforce learning without punishment?
   - What discussion opportunities do choices create for video calls?

**Format**: Detailed breakdown with specific choice language and reasoning.
```

---

## STEP 5: Ending Development

### Prompt 5A: Story Endings Design
```
Create three distinct, thematically appropriate endings that connect to our decision point pathways.

**Ending Requirements**:

1. **Ending Theme 1: [CONSISTENT PRIMARY]**
   - **Pathway**: 1A→2A (consistent approach in primary direction)
   - **Theme**: What lesson or growth does this ending demonstrate?
   - **Resolution**: How are conflicts resolved in this version?
   - **Character Growth**: How has {{childName}} developed?
   - **Connection to Original**: How does this honor the source story's themes?

2. **Ending Theme 2: [CONSISTENT SECONDARY]**
   - **Pathway**: 1B→2B (consistent approach in secondary direction)
   - **Theme**: What alternative lesson does this ending teach?
   - **Resolution**: How does this approach solve the story's challenges?
   - **Character Growth**: What different growth does {{childName}} show?
   - **Unique Value**: What does this ending offer that the original story didn't?

3. **Ending Theme 3: [BALANCED/INTEGRATED]**
   - **Pathways**: 1A→2B + 1B→2A (mixed approaches)
   - **Theme**: What does this "best of both worlds" ending demonstrate?
   - **Resolution**: How does combining approaches create a unique solution?
   - **Character Growth**: How does {{childName}} show balanced wisdom?
   - **Enhanced Learning**: What additional insights does this provide?

4. **Ending Quality Standards**
   - Age-appropriate resolution and consequences
   - Satisfying closure while honoring the interactive journey
   - Clear connection between choices and outcomes
   - Positive, growth-oriented conclusions
   - Natural setup for post-story discussion

**Format**: Detailed ending descriptions with thematic analysis and connection mapping.
```

---

## STEP 6: Pathway Architecture

### Prompt 6A: Complete Pathway Design
```
Map the complete narrative pathways connecting opening, decision points, and endings according to our framework.

**Pathway Mapping**:
Create detailed scene flow for all four possible pathways:

1. **Pathway 1A→2A** (ending: consistent-primary)
   - Opening scenes → DP1 choice A → Branch A development → DP2-A choice A → Journey 1A2A → DP3 version 1 → Ending 1
   - Scene count and pacing
   - Key narrative beats for this pathway
   - Character interactions specific to this route

2. **Pathway 1A→2B** (ending: balanced)
   - Opening scenes → DP1 choice A → Branch A development → DP2-A choice B → Journey 1A2B → DP3 version 3 → Ending 3
   - Narrative logic for choice combination
   - Character development through mixed approaches
   - Unique story beats for this pathway

3. **Pathway 1B→2A** (ending: balanced) 
   - Opening scenes → DP1 choice B → Branch B development → DP2-B choice A → Journey 1B2A → DP3 version 3 → Ending 3
   - How this pathway differs from 1A→2B while reaching same ending
   - Character growth through alternative mixed approach
   - Distinct narrative elements

4. **Pathway 1B→2B** (ending: consistent-secondary)
   - Opening scenes → DP1 choice B → Branch B development → DP2-B choice B → Journey 1B2B → DP3 version 2 → Ending 2
   - Consistent secondary approach development
   - Character arc completion
   - Alternative resolution method

**Scene Architecture**:
- Total scene count: [RECOMMENDED NUMBER]
- Scene ID naming convention
- Transition logic between scenes
- Shared vs. unique scenes across pathways
- Balance of content across all routes

**Format**: Complete pathway flowchart with scene descriptions and transition logic.
```

---

## STEP 7: Scene Content Creation

### Prompt 7A: Systematic Scene Drafting
```
Draft the content for all scenes systematically, following the established pathway architecture.

**Scene Development Process**:
For each scene in the pathway architecture, create:

1. **Scene Header Information**
   - Scene ID (following naming convention)
   - Pathway context (which routes include this scene)
   - Position in narrative arc
   - Primary function (exposition/development/choice/resolution)

2. **Scene Content**
   - **Text**: Complete scene narrative with {{childName}} integration
   - **Choices**: Decision options with labels and next scene connections
   - **Emotional Beat**: Primary feeling or energy of this scene
   - **Character Focus**: Which characters appear and their roles

3. **Scene Categories to Draft**:
   - **Opening Scenes** (2-3 scenes): Story introduction, character establishment
   - **Branch Development** (4-6 scenes): Post-DP1 development for both branches
   - **Decision Point Scenes** (6 scenes): DP1, DP2-A, DP2-B, DP3 versions 1-3
   - **Journey Scenes** (8 scenes): Four pathway-specific development sequences
   - **Ending Scenes** (3 scenes): Three thematic resolutions

4. **Content Standards**:
   - Age-appropriate vocabulary and concepts for [AGE_RANGE]
   - Consistent character voices (to be refined in later steps)
   - Clear narrative progression
   - Engaging hooks and natural pause points for video calls
   - Proper {{childName}} placeholder usage

**Working Method**: Draft all scenes in pathway order, ensuring logical flow and narrative coherence.

**Format**: Complete scene drafts organized by pathway, ready for voice and style refinement.
```

---

## STEP 8: Pathway Validation

### Prompt 8A: Comprehensive Pathway Review
```
Review each of the four complete pathways individually to ensure narrative coherence and flow.

**Individual Pathway Analysis**:
For each pathway (1A2A, 1A2B, 1B2A, 1B2B):

1. **Narrative Coherence Check**
   - Does the story flow logically from beginning to end?
   - Are all character appearances properly introduced and maintained?
   - Do choices and consequences connect meaningfully?
   - Are there any plot holes or inconsistencies?

2. **Character Consistency**
   - Do all characters behave consistently within this pathway?
   - Are character relationships properly developed?
   - Does {{childName}}'s growth arc make sense?
   - Are character voices maintained throughout?

3. **Thematic Alignment**
   - Does this pathway deliver on its intended theme/lesson?
   - Are the educational objectives met appropriately?
   - Does the ending feel earned based on the choices made?
   - Is the moral/lesson clear without being preachy?

4. **Technical Validation**
   - Are all scene transitions properly connected?
   - Do choice labels accurately reflect the content?
   - Are scene IDs correctly implemented?
   - Is the pathway length appropriate for [AGE_RANGE]?

**Cross-Pathway Validation**:
- Do shared scenes work properly for all pathways that use them?
- Are there any contradictions between pathways?
- Does each pathway feel distinct and worthwhile?
- Is the overall choice architecture balanced?

**Issue Identification**: Document specific problems with scene numbers and detailed descriptions for correction.

**Format**: Pathway-by-pathway analysis with specific issue identification and correction recommendations.
```

### Prompt 8B: Narrative Fixes Implementation
```
Based on the pathway validation, implement all identified narrative fixes and improvements.

**Fix Categories**:

1. **Plot Coherence Issues**
   - Scene sequence problems
   - Missing story connections
   - Character appearance inconsistencies
   - Timeline or logic problems

2. **Character Consistency Problems**
   - Voice inconsistencies
   - Behavioral contradictions
   - Relationship development issues
   - Missing character motivations

3. **Choice Logic Improvements**
   - Unclear decision points
   - Consequence mismatches
   - Choice labeling problems
   - Pathway transition issues

4. **Technical Corrections**
   - Scene ID fixes
   - Transition connection errors
   - Placeholder implementation problems
   - Content length adjustments

**Implementation Process**: Address each identified issue systematically, ensuring fixes don't create new problems in other pathways.

**Validation**: After implementing fixes, briefly re-check affected pathways to confirm resolution.

**Format**: Updated scene content with clear documentation of changes made.
```

---

## STEP 9: Character Voice Refinement

### Prompt 9A: Character Voice Implementation
```
Refine all scene content to ensure accurate character voice representation according to our character guide.

**Voice Refinement Process**:

1. **Character Voice Standards**
   Reference the established character guide for:
   - Speech patterns and vocabulary choices
   - Personality expression through dialogue
   - Emotional range and expression methods
   - Relationship dynamics with {{childName}} and other characters

2. **Scene-by-Scene Voice Review**
   For each scene containing character dialogue or action:
   - **Dialogue Authenticity**: Does each character sound distinctive and true to their established voice?
   - **Action Description**: Are character actions described in ways that reflect their personality?
   - **Emotional Expression**: Do characters express feelings in their established style?
   - **Interaction Style**: Do character relationships feel authentic and consistent?

3. **Character-Specific Focus Areas**:
   - **[PRIMARY CHARACTER]**: [Specific voice elements to emphasize]
   - **[SECONDARY CHARACTER]**: [Specific voice elements to emphasize]
   - **[SUPPORTING CHARACTERS]**: [Specific voice elements to emphasize]
   - **{{childName}} Integration**: How other characters naturally interact with the child protagonist

4. **Voice Consistency Across Pathways**
   - Ensure each character sounds the same regardless of which pathway they appear in
   - Maintain character growth arcs appropriate to each pathway
   - Preserve character relationships and dynamics throughout

**Quality Standards**: Each character should be recognizable by their voice alone, with clear personality distinctions and authentic dialogue.

**Format**: Revised scene content with enhanced character voice implementation and notes on changes made.
```

---

## STEP 10: Author Style Implementation

### Prompt 10A: Style Guide Application
```
Apply the [AUTHOR_NAME] style guide comprehensively to all scene content, ensuring consistent authorial voice throughout.

**Style Implementation Areas**:

1. **Rhythm & Flow Application**
   - Apply [AUTHOR_NAME]'s characteristic meter and pacing
   - Implement natural pause points for read-aloud delivery
   - Ensure appropriate breath points for video call storytelling
   - Match the author's typical line length and flow patterns

2. **Language Characteristics**
   - Adjust vocabulary to match author's typical choices
   - Implement characteristic sentence structures and lengths
   - Apply author's word choice preferences (concrete/abstract/sensory/playful)
   - Include any signature made-up words or language play appropriate to this author

3. **Repetitive Elements Integration**
   - Incorporate author's typical refrains and repeated phrases
   - Apply structural repetition patterns
   - Implement sound patterns (rhyme/alliteration/assonance as appropriate)
   - Use rhythm patterns characteristic of this author

4. **Narrative Voice Consistency**
   - Apply author's characteristic perspective and tone
   - Implement typical relationship to reader (direct address/inclusive/observational)
   - Match author's emotional range and expression style
   - Ensure narrative voice consistency across all pathways

5. **Story Structure Alignment**
   - Apply author's typical opening and closing styles
   - Implement characteristic problem introduction and resolution methods
   - Use author's typical transition and pacing approaches
   - Ensure ending patterns match authorial style

**Scene-by-Scene Application**: Review every scene to ensure style guide elements are properly implemented while maintaining narrative coherence and character voice authenticity.

**Quality Check**: Each scene should feel authentically written in [AUTHOR_NAME]'s style while serving the interactive story structure.

**Format**: Final refined scene content with comprehensive style guide implementation.
```

---

## STEP 11: Illustration Guide Creation

### Prompt 11A: Visual Design Framework
```
Create a comprehensive illustration guide with specific generation prompts for all visual elements needed for the interactive story.

**Illustration Categories Required**:

1. **Background Illustrations (Scenery)**
   For each unique setting in the story:
   - **Setting Description**: Detailed visual description
   - **Mood/Atmosphere**: Emotional tone the background should convey
   - **Age Appropriateness**: Visual elements suitable for [AGE_RANGE]
   - **Generation Prompt**: Complete, specific prompt for AI image generation
   - **Technical Specs**: "Wide landscape format, detailed background scenery, bright and engaging colors, child-friendly art style, no characters present"

2. **Character Illustrations** 
   For each character in the story:
   - **Physical Description**: Complete visual characteristics
   - **Personality Visualization**: How personality shows in appearance/posture
   - **Clothing/Accessories**: Specific outfit and item details
   - **Expression Range**: Different emotional states needed
   - **Generation Prompt**: Complete character generation prompt
   - **Technical Specs**: "Character illustration, plain white background, full body view, [AUTHOR_NAME]-style character design, bright colors, friendly appearance suitable for children"

3. **Scene-Specific Visual Elements**
   - **Props/Objects**: Important story items that appear in scenes
   - **Action Illustrations**: Characters in specific poses or activities
   - **Emotional Moments**: Visual representations of key emotional beats

**Illustration Consistency Standards**:
- **Art Style**: Consistent with [AUTHOR_NAME]'s typical illustration aesthetics
- **Color Palette**: Bright, engaging, age-appropriate colors
- **Character Design**: Friendly, approachable character appearances
- **Background Integration**: Backgrounds that support story mood without overwhelming text

**Generation Prompt Format**:
Each prompt should be complete and specific enough to generate consistent, high-quality illustrations across different scenes and pathways.

**Technical Requirements**:
- Background images: Landscape format, no characters
- Character images: White backgrounds for PNG conversion and screen positioning
- Consistent style across all visual elements
- Appropriate resolution and quality for digital story presentation

**Format**: Complete illustration guide with categorized, ready-to-use generation prompts and technical specifications.
```

---

## STEP 12: JSON File Generation

### Prompt 12A: Final JSON Compilation
```
Compile all refined content into the final, properly structured JSON file following our unified authoring format.

**JSON Structure Requirements**:

```json
{
  "id": "[slug-unique]",
  "title": "[Final Story Title]",
  "description": "[one to two sentence blurb]",
  "ageRange": [[MIN_AGE], [MAX_AGE]],
  "themes": ["[primary-theme]", "[secondary-theme]"],
  "storyType": "personalized" | "original",
  "personalization": {
    "tokens": ["childName"],
    "defaults": { "childName": "Alex" }
  },
  "interactive": true,
  "access": {
    "tier": "guest" | "free" | "paid" | "enterprise",
    "releaseStatus": "draft" | "published" | "archived"
  },
  "media": {
    "backgrounds": {
      "[background-key]": {
        "description": "[setting-description]",
        "illustration_prompt": "[background-generation-prompt]"
      }
    },
    "characters": {
      "[character-key]": {
        "description": "[character-description]",
        "voice": "[voice-characteristics]",
        "illustration_prompt": "[character-generation-prompt]"
      }
    }
  },
  "pedagogy": {
    "estimatedReadTime": "[X–Y minutes]",
    "learningObjectives": ["[objective-1]", "[objective-2]"],
    "discussionPrompts": ["[before]", "[during]", "[after]"]
  },
  "scenes": [
    {
      "id": "[scene-id]",
      "title": "[Optional Scene Title]",
      "background": "[background-key]",
      "text": "[final-refined-scene-text-with-{{childName}}]",
      "choices": [
        { "label": "[choice-label]", "nextSceneId": "[target-scene-id]" }
      ],
      "meta": {
        "emotionalBeat": "[primary-emotion]",
        "readAloudNotes": "[guidance for video call delivery]"
      }
    }
  ],
  "pathways": {
    "1A2A": {
      "description": "[pathway-description]",
      "theme": "[ending-theme]",
      "learningOutcome": "[what the child learns]",
      "scenes": ["[ordered-scene-ids]"],
      "totalScenes": [NUMBER],
      "emotionalArc": "[arc description]"
    }
  }
}
Note: the only scenes that should have zero choices are the endings. All scenes that continue on to another scene must have at least one choice along with the appropriate nextSceneId.
```

**Compilation Process**:
- Fill `storyType`, `personalization`, `access`, and `media` blocks.
- Validate all `nextSceneId` references and pathway scene lists.
- Set `interactive=false` for linear stories (no choices).
```

---

## Quality Assurance Checklist

### Final Story Validation
- [ ] All four pathways (1A2A, 1A2B, 1B2A, 1B2B) are complete and coherent
- [ ] Character voices are consistent and distinctive throughout
- [ ] [AUTHOR_NAME] style is authentically implemented across all scenes
- [ ] {{childName}} integration feels natural and engaging
- [ ] All decision points offer meaningful, age-appropriate choices
- [ ] Educational objectives are met without being preachy
- [ ] Story content is appropriate for [AGE_RANGE]
- [ ] All scene transitions and connections work properly
- [ ] JSON structure is valid and complete
- [ ] Illustration guide provides complete visual framework
- [ ] Read-aloud quality is optimized for video calls
- [ ] All pathways lead to satisfying, thematically appropriate endings

### Technical Validation
- [ ] All scene IDs follow consistent naming convention
- [ ] All choice connections reference existing scenes
- [ ] All pathways are properly mapped and documented
- [ ] JSON syntax is valid and error-free
- [ ] Illustration prompts are complete and specific
- [ ] All required metadata is included and accurate

This comprehensive framework provides a systematic, reusable process for transforming public domain stories into high-quality interactive content in specific author styles. Each step builds on the previous ones, ensuring consistency and quality throughout the development process.


### Upload to supabase
python3 generative/tools/publish_story.py PATH/TO/story.json --slug my-custom-slug